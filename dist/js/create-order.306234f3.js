(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create-order"],{"0eaf":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"simple-header"},[r("i",{staticClass:"iconfont icon-back",on:{click:t.goBack}}),r("div",{staticClass:"simple-header-name"},[t._v(t._s(t.name))]),r("i",{staticClass:"iconfont icon-menu"})])},a=[],s={props:{name:{type:String,default:""},back:{type:String,default:""}},methods:{goBack:function(){this.back?this.$router.push({path:this.back}):this.$router.go(-1),this.$emit("callback")}}},c=s,o=(r("ed0b"),r("2877")),i=Object(o["a"])(c,n,a,!1,null,"123edaf7",null);e["a"]=i.exports},"159b":function(t,e,r){var n=r("da84"),a=r("fdbc"),s=r("785a"),c=r("17c2"),o=r("9112"),i=function(t){if(t&&t.forEach!==c)try{o(t,"forEach",c)}catch(e){t.forEach=c}};for(var u in a)a[u]&&i(n[u]&&n[u].prototype);i(s)},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,a=r("a640"),s=a("forEach");t.exports=s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1aa9":function(t,e,r){},"1dde":function(t,e,r){var n=r("d039"),a=r("b622"),s=r("2d00"),c=a("species");t.exports=function(t){return s>=51||!n((function(){var e=[],r=e.constructor={};return r[c]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"379f":function(t,e,r){"use strict";r("1aa9")},"3f49":function(t,e,r){"use strict";r.d(e,"e",(function(){return a})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"f",(function(){return u}));var n=r("a27e");function a(){return n["a"].get("/address",{pageNumber:1,pageSize:1e3})}function s(t){return n["a"].post("/address",t)}function c(t){return n["a"].put("/address",t)}function o(t){return n["a"].get("/address/".concat(t))}function i(t){return n["a"].delete("/address/".concat(t))}function u(){return n["a"].get("/address/default")}},"4fa1":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"create-order"},[r("s-header",{attrs:{name:"生成订单"},on:{callback:t.deleteLocal}}),r("div",{staticClass:"address-wrap",on:{click:t.goTo}},[r("div",{staticClass:"name"},[r("span",[t._v(t._s(t.address.userName))]),r("span",[t._v(t._s(t.address.userPhone))])]),r("div",{staticClass:"address"},[t._v(" "+t._s(t.address.provinceName)+" "+t._s(t.address.cityName)+" "+t._s(t.address.regionName)+" "+t._s(t.address.detailAddress)+" ")]),r("i",{staticClass:"iconfont icon-arrow"})]),r("div",{staticClass:"good"},t._l(t.cartList,(function(e,n){return r("div",{key:n,staticClass:"good-item"},[r("div",{staticClass:"good-img"},[r("img",{attrs:{src:t.getRealImg(e.goodsCoverImg)}})]),r("div",{staticClass:"good-desc"},[r("div",{staticClass:"good-title"},[r("span",[t._v(t._s(e.goodsName))]),r("span",[t._v("x"+t._s(e.goodsCount))])]),r("div",{staticClass:"good-btn"},[r("div",{staticClass:"price"},[t._v("¥"+t._s(e.sellingPrice))])])])])})),0),r("div",{staticClass:"pay-wrap"},[r("div",{staticClass:"price"},[r("span",[t._v("商品金额")]),r("span",[t._v("¥"+t._s(t.total))])]),r("van-button",{staticClass:"pay-btn",attrs:{color:"#1baeae",type:"primary",block:""},on:{click:t.createOrder}},[t._v("生成订单")])],1),r("van-popup",{style:{height:"30%"},attrs:{closeable:"","close-on-click-overlay":!1,position:"bottom"},on:{close:t.close},model:{value:t.showPay,callback:function(e){t.showPay=e},expression:"showPay"}},[r("div",{style:{width:"90%",margin:"0 auto",padding:"50px 0"}},[r("van-button",{style:{marginBottom:"10px"},attrs:{color:"#1989fa",block:""},on:{click:function(e){return t.payOrder(1)}}},[t._v("支付宝支付")]),r("van-button",{attrs:{color:"#4fc08d",block:""},on:{click:function(e){return t.payOrder(2)}}},[t._v("微信支付")])],1)])],1)},a=[],s=r("1da1"),c=(r("96cf"),r("e9c4"),r("a15b"),r("d81d"),r("d3b7"),r("159b"),r("0eaf")),o=r("8ee6"),i=r("3f49"),u=r("99c5"),d=r("495f"),f={components:{sHeader:c["a"]},data:function(){return{cartList:[],address:{},showPay:!1,orderNo:"",cartItemIds:[]}},mounted:function(){this.init()},methods:{init:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s,c,u,f,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast.loading({message:"加载中...",forbidClick:!0}),r=t.$route.query,n=r.addressId,a=r.cartItemIds,s=a?JSON.parse(a):JSON.parse(Object(d["a"])("cartItemIds")),t.cartItemIds=s,Object(d["c"])("cartItemIds",JSON.stringify(s)),e.next=7,Object(o["c"])({cartItemIds:s.join(",")});case 7:if(c=e.sent,u=c.data,!n){e.next=15;break}return e.next=12,Object(i["d"])(n);case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,Object(i["f"])();case 17:e.t0=e.sent;case 18:if(f=e.t0,l=f.data,l){e.next=23;break}return t.$router.push({path:"address"}),e.abrupt("return");case 23:t.cartList=u,t.address=l,t.$toast.clear();case 26:case"end":return e.stop()}}),e)})))()},goTo:function(){console.log(this.cartItemIds),this.$router.push({path:"address?cartItemIds=".concat(JSON.stringify(this.cartItemIds))})},deleteLocal:function(){Object(d["c"])("cartItemIds","")},createOrder:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={addressId:t.address.addressId,cartItemIds:t.cartList.map((function(t){return t.cartItemId}))},e.next=3,Object(u["c"])(r);case 3:n=e.sent,a=n.data,Object(d["c"])("cartItemIds",""),t.orderNo=a,t.showPay=!0,console.log(a);case 9:case"end":return e.stop()}}),e)})))()},close:function(){this.$router.push({path:"order"})},payOrder:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.$toast.loading("正在支付..."),r.next=3,Object(u["f"])({orderNo:e.orderNo,payType:t});case 3:e.$router.push({path:"order"});case 4:case"end":return r.stop()}}),r)})))()}},computed:{total:function(){var t=0;return this.cartList.forEach((function(e){t+=e.goodsCount*e.sellingPrice})),t}}},l=f,p=(r("379f"),r("2877")),v=Object(p["a"])(l,n,a,!1,null,"19fbf817",null);e["default"]=v.exports},"606c":function(t,e,r){},"99c5":function(t,e,r){"use strict";r.d(e,"e",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return o})),r.d(e,"f",(function(){return i})),r.d(e,"c",(function(){return u}));var n=r("a27e");function a(t){return n["a"].get("/order",{params:t})}function s(t){return n["a"].get("/order/".concat(t))}function c(t){return n["a"].put("/order/".concat(t,"/cancel"))}function o(t){return n["a"].put("/order/".concat(t,"/finish"))}function i(t){return n["a"].get("/paySuccess",{params:t})}function u(t){return n["a"].post("/saveOrder",t)}},a15b:function(t,e,r){"use strict";var n=r("23e7"),a=r("e330"),s=r("44ad"),c=r("fc6a"),o=r("a640"),i=a([].join),u=s!=Object,d=o("join",",");n({target:"Array",proto:!0,forced:u||!d},{join:function(t){return i(c(this),void 0===t?",":t)}})},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},d81d:function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").map,s=r("1dde"),c=s("map");n({target:"Array",proto:!0,forced:!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},e9c4:function(t,e,r){var n=r("23e7"),a=r("da84"),s=r("d066"),c=r("2ba4"),o=r("e330"),i=r("d039"),u=a.Array,d=s("JSON","stringify"),f=o(/./.exec),l=o("".charAt),p=o("".charCodeAt),v=o("".replace),h=o(1..toString),m=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,y=function(t,e,r){var n=l(r,e-1),a=l(r,e+1);return f(g,t)&&!f(b,a)||f(b,t)&&!f(g,n)?"\\u"+h(p(t,0),16):t},I=i((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&n({target:"JSON",stat:!0,forced:I},{stringify:function(t,e,r){for(var n=0,a=arguments.length,s=u(a);n<a;n++)s[n]=arguments[n];var o=c(d,null,s);return"string"==typeof o?v(o,m,y):o}})},ed0b:function(t,e,r){"use strict";r("606c")}}]);